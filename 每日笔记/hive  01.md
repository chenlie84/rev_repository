## hive  01

### 1.数据仓库的概念

1. **数据仓库** : data warehouse (DW 或 DWH**)**
2. **数据仓库的特征:**
   1. 面向主题: 针对历史层面的数据进行一个高度的抽象,
   2. 集成性: 数据来自不同的系统
   3. 非易失性: 数据存储到数据仓库并不会轻易的删除
   4. 时变性:随着时间,会更新历史数据
3. **数据仓库与数据库的区别**
   1. **OLTP**:在线联机事务处理 : 针对数据存储进行事务管理. : **数据库**
   2. **OLAP**:在线联机分析处理:对历史数据进行分析和决策支持.**数据仓库**
4. **数据仓库的分层架构**:
   1. **数据源** (ODS 或 贴源层): 数据源来源于不同的系统 .
   2.  **数据仓库层** : 将贴源层 的数据 进行集成,然后进行历史数据的分析.
      1. ETL(抽取 ,转换,加载) 
   3. **系统应用层(application)** : 将数据以图表或报表的形式直观展现. 
      1. 分层原因 : 用空间换时间 ****
   4. **元数据管理**: 最主要的是指 : 数据与表之间的关系映射(数据模型的定义)

### 2.hive的介绍

1. hive的简介

   1. hive:是基于Hadoop的数据仓库的工具 , hive中数据的储存在Hadoop的hdfs上就进行储存. hive中的数据分析 , 使用类SQL的语言进行分析 -- HQL , hive中sql的执行 , 会转成MAPReducer去执行.

   2. hive的优点 : 

      1. 学习成本低
      2. 降低项目开发周期
      3. mapreducer

   3. 使用hive

      1. 操作简单易上手
      2. 特点
         1. 可扩展 , hive可以自由扩展集群的规模. (hive没有集群的概念 , 只是一个工具 ,) 即扩展Hadoop
         2. 延展性 : 功能阔以扩展,主要是用户自定义函数
         3. 容错 : Hadoop的容错机制.

   4. **hive的架构**

      1. 用户接口 : hive提供多种用户接口 主要使用的是:shell接口
      2. 解析器 : 
         1. 编译器: 用于将sql转换成mapreduce
         2. 优化器 : 在编译后,对结果进行优化
         3. 执行器 : 执行的SQL(最终执行的是MapReduce)

   5. hive的使用方式

      1. hive shell

      2. 通过jdbc的方式链接 , beeline

         首先要启动服务  , hiveserver2

         1. 前台启动
         2. 后台启动

   6. hive的表:

      1. 管理表(内部表) : 表的删除 , 数据也会被删除.

         1. 创建表并指定字段之间分隔符 "\001" 是默认的分隔符

         2. 根据查询结果创建表 , 会将查询的数据复制到新表

         3. 根据已经存在的表结构创建表  

            create table stu4 like stu2 只会复制表的结构 而不会复制数据

      2. 外部表(external) : 删除表的时候 , 不会删除表的信息 , 只会删除表的元数据

         1. 创建老师外部表
         2. 创建学生表
         3. 加载数据
            1. 从本地向系统表中加载数据
            2. 加载数据并覆盖已有数据

      3. 分区表

         思想 : 分而治之 分的是目录.

         创建表的 语法

         ``` shell
         create table score (s_id string , c_id string , s_score int) partitioned by (month string) row fromat delimited fields terminated by '\t' 
         ```

         创建多个分区

         加载数据到分区

         多分区联合查询 使用union all 来实现

         查看分区

         ``` 
         show partitions table_name
         ```

         添加一个分区

         添加多个分区

         删除分区

      4. 分桶表 针对文件进行分

         1. 按照分桶的字段,把不同的数据分到不同的文件中 , (相当于Hadoop中分区)
         2. 

### 3.hive的基本操作



### 4.hive shell参数价绍

### 5.hive函数(udf 用户自定义函数)

### 6.hive数据的压缩

### 7.hive数据结合

### 8.存储与压缩的结合





