## hadoop01 zookeeper

### 1.zookeeper介绍

zookeeper是一个分布式协调服务的开源框架.最终解决的是数据的一致性.zookeeper是一个分布式的小文件系统.zookeeper可以进行简单的事务处理

1. znode节点: 用于贮存zookeeper中的数据

### 2.zookeeper的架构

1. **主从结构**:一个主节点 , 多个从节点
2. **主备结构**: 作为主节点 , 一个正在运行的主节点,另外一个是备用节点
3. **leader** : 集群中的核心节点,主要用于事务的处理,也能进行非事务请求的处理.
   1. zookeeper中的事务:添加znode节点,删除节点,修改节点过程中,需要事务管理
   2. 查询一个节点,不需要事务.
4. **Follower**: 用于集群中的从节点,主要用于非事务请求的处理,将事务请求转发给leader进行处理
5. **observer** : 观察者观察集群中的一个状态,并且进行状态更新.处理非事务请求,同上.不会进行投票选举.提高并行度处理非事务请求,和转发事务请求

### 3.zookeeper的特性

1. **全局数据的一致性** : 每一节点的数据都是一样的,这是**最重要**的特征
2. **可靠性**:
3. **顺序性**:
4. **数据更新的原子性**: 
5. **实时性:**

### 4.搭建&shell操作

### 5.zookeeper的数据模型

按照znode的节点进行数据的贮存和管理,树状结构,

1. 特性
   1. znode兼具文件与目录的特性
   2. 具有原子性
   3. 贮存数据有限制,最大1M
   4. 必须通过绝对路径来访问
2.  znode节点类型
    1. 永久节点
    2. 临时节点
    3. 序列化节点(永久性的)
    4. 临时序列化节点(用处不大) create -e -s /lis "sadad" 
3. 节点的属性

### 6.watch机制特点

用于观察节点状态的变化.

1. 特点
   1. 一次性触发**最主要的特点**
   2. 事件封装
   3. event异步发送
   4. 先注册再触发
2. watch机制和临时节点整合应用
   1. 如果客户端在后台一直开启,那么通过watch机制临时节点已经删除,那么有可能zk节点down掉
   2. 用于观察某个节点是否宕机

### 7.zookeeperAPI

``` java

```









